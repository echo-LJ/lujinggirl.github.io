<!DOCTYPE html>
<html lang>
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Echo">



    <meta name="description" content="blog">



<title>使用react搭建组件库--radio组件 | Echo的博客</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


</head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Echo&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Echo&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">使用react搭建组件库--radio组件</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">Echo</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">May 1, 2020&nbsp;&nbsp;10:00:00</a>
                        </span>
                    
                    
                </div>
            
        </header>

        <div class="post-content">
            <meta name="referrer" content="no-referrer">

<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>你应该需要：<a href="[https://www.jianshu.com/p/8ef96e06adcc](https://www.jianshu.com/p/8ef96e06adcc">使用react搭建组件库：react+typescript+storybook</a><br>)</p>
<h2 id="一、-安装依赖"><a href="#一、-安装依赖" class="headerlink" title="一、 安装依赖"></a>一、 安装依赖</h2><p>在组件中使用 <code>rc-checkbox</code>： <a href="https://www.npmjs.com/package/rc-checkbox" target="_blank" rel="noopener">react rc-checkbox component</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install rc-checkbox</span><br></pre></td></tr></table></figure>
<h2 id="二、-编写组件"><a href="#二、-编写组件" class="headerlink" title="二、 编写组件"></a>二、 编写组件</h2><ul>
<li><p>新建 <code>src/components/Radio/radio.tsx</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &apos;react&apos;;</span><br><span class="line">import RcCheckbox from &apos;rc-checkbox&apos;;</span><br><span class="line">import classNames from &apos;classnames&apos;;</span><br><span class="line">import &#123; RadioProps, RadioChangeEvent &#125; from &apos;./interface&apos;;</span><br><span class="line">import &#123; ConfigContext &#125; from &apos;../config-provider&apos;;</span><br><span class="line">import RadioGroupContext from &apos;./context&apos;;</span><br><span class="line">import &#123; composeRef &#125; from &apos;../_util/ref&apos;;</span><br><span class="line">const InternalRadio: React.ForwardRefRenderFunction&lt;unknown, RadioProps&gt; = (props, ref) =&gt; &#123;</span><br><span class="line">  const context = React.useContext(RadioGroupContext);</span><br><span class="line">  const &#123; getPrefixCls, direction &#125; = React.useContext(ConfigContext);</span><br><span class="line">  const innerRef = React.useRef&lt;HTMLElement&gt;();</span><br><span class="line">  const mergedRef = composeRef(ref, innerRef);</span><br><span class="line">  </span><br><span class="line">  const onChange = (e: RadioChangeEvent) =&gt; &#123;</span><br><span class="line">    if (props.onChange) &#123;</span><br><span class="line">      props.onChange(e);</span><br><span class="line">    &#125;</span><br><span class="line">    if (context?.onChange) &#123;</span><br><span class="line">      context.onChange(e);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const &#123; prefixCls: customizePrefixCls, className, children, style, ...restProps &#125; = props;</span><br><span class="line">  const prefixCls = getPrefixCls(&apos;radio&apos;, customizePrefixCls);</span><br><span class="line">  console.log(prefixCls, customizePrefixCls)</span><br><span class="line">  const radioProps: RadioProps = &#123; ...restProps &#125;;</span><br><span class="line">  if (context) &#123;</span><br><span class="line">    radioProps.name = context.name;</span><br><span class="line">    radioProps.onChange = onChange;</span><br><span class="line">    radioProps.checked = props.value === context.value;</span><br><span class="line">    radioProps.disabled = props.disabled || context.disabled;</span><br><span class="line">  &#125;</span><br><span class="line">  const wrapperClassString = classNames(className, &#123;</span><br><span class="line">    [`$&#123;prefixCls&#125;-wrapper`]: true,</span><br><span class="line">    [`$&#123;prefixCls&#125;-wrapper-checked`]: radioProps.checked,</span><br><span class="line">    [`$&#123;prefixCls&#125;-wrapper-disabled`]: radioProps.disabled,</span><br><span class="line">    [`$&#123;prefixCls&#125;-wrapper-rtl`]: direction === &apos;rtl&apos;,</span><br><span class="line">  &#125;);</span><br><span class="line">  return (</span><br><span class="line">    &lt;label</span><br><span class="line">      className=&#123;wrapperClassString&#125;</span><br><span class="line">      style=&#123;style&#125;</span><br><span class="line">      onMouseEnter=&#123;props.onMouseEnter&#125;</span><br><span class="line">      onMouseLeave=&#123;props.onMouseLeave&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;RcCheckbox &#123;...radioProps&#125; prefixCls=&#123;prefixCls as string&#125; ref=&#123;mergedRef as any&#125; /&gt;</span><br><span class="line">      &#123;children !== undefined ? &lt;span&gt;&#123;children&#125;&lt;/span&gt; : null&#125;</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line">const Radio = React.forwardRef&lt;unknown, RadioProps&gt;(InternalRadio);</span><br><span class="line">Radio.displayName = &apos;Radio&apos;;</span><br><span class="line"></span><br><span class="line">Radio.defaultProps = &#123;</span><br><span class="line">  type: &apos;radio&apos;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default Radio;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建 src/components/Radio/interface.tsx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">export interface AbstractCheckboxProps&lt;T&gt; &#123;</span><br><span class="line">  prefixCls?: string;</span><br><span class="line">  className?: string;</span><br><span class="line">  defaultChecked?: boolean;</span><br><span class="line">  checked?: boolean;</span><br><span class="line">  style?: React.CSSProperties;</span><br><span class="line">  disabled?: boolean;</span><br><span class="line">  onChange?: (e: T) =&gt; void;</span><br><span class="line">  onClick?: React.MouseEventHandler&lt;HTMLElement&gt;;</span><br><span class="line">  onMouseEnter?: React.MouseEventHandler&lt;HTMLElement&gt;;</span><br><span class="line">  onMouseLeave?: React.MouseEventHandler&lt;HTMLElement&gt;;</span><br><span class="line">  onKeyPress?: React.KeyboardEventHandler&lt;HTMLElement&gt;;</span><br><span class="line">  onKeyDown?: React.KeyboardEventHandler&lt;HTMLElement&gt;;</span><br><span class="line">  value?: any;</span><br><span class="line">  tabIndex?: number;</span><br><span class="line">  name?: string;</span><br><span class="line">  children?: React.ReactNode;</span><br><span class="line">  id?: string;</span><br><span class="line">  autoFocus?: boolean;</span><br><span class="line">  type?: string;</span><br><span class="line">&#125;</span><br><span class="line">export type RadioProps = AbstractCheckboxProps&lt;RadioChangeEvent&gt;;</span><br><span class="line">export interface RadioChangeEventTarget extends RadioProps &#123;</span><br><span class="line">  checked: boolean;</span><br><span class="line">&#125;</span><br><span class="line">export interface RadioChangeEvent &#123;</span><br><span class="line">  target: RadioChangeEventTarget;</span><br><span class="line">  stopPropagation: () =&gt; void;</span><br><span class="line">  preventDefault: () =&gt; void;</span><br><span class="line">  nativeEvent: MouseEvent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export interface RadioGroupContextProps &#123;</span><br><span class="line">  onChange: (e: RadioChangeEvent) =&gt; void;</span><br><span class="line">  value: any;</span><br><span class="line">  disabled?: boolean;</span><br><span class="line">  name?: string;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建 src/components/config-provider/context.tsx: 为组件库提供共享状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &apos;react&apos;;</span><br><span class="line">export interface ConfigConsumerProps &#123;</span><br><span class="line">  getPrefixCls: (suffixCls: string, customizePrefixCls?: string) =&gt; string;</span><br><span class="line">  direction?: &apos;ltr&apos; | &apos;rtl&apos;;</span><br><span class="line">&#125;</span><br><span class="line">export const ConfigContext = React.createContext&lt;ConfigConsumerProps&gt;(&#123;</span><br><span class="line">  // We provide a default function for Context without provider</span><br><span class="line">  getPrefixCls: (suffixCls: string, customizePrefixCls?: string) =&gt; &#123;</span><br><span class="line">    if (customizePrefixCls) return customizePrefixCls;</span><br><span class="line"></span><br><span class="line">    return suffixCls ? `echo-$&#123;suffixCls&#125;` : &apos;echo&apos;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export const ConfigConsumer = ConfigContext.Consumer;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建 src/components/config-provider/index.tsx: 为组件库提供共享状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ConfigContext, ConfigConsumer &#125; from &apos;./context&apos;;</span><br><span class="line">export &#123; ConfigContext, ConfigConsumer&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建 src/components/config-provider/SizeContext.tsx: 为组件库提供大小共享状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &apos;react&apos;;</span><br><span class="line">export type SizeType = &apos;small&apos; | &apos;middle&apos; | &apos;large&apos; | undefined;</span><br><span class="line">const SizeContext = React.createContext&lt;SizeType&gt;(undefined);</span><br><span class="line">export default SizeContext;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建 src/components/Radio/context.tsx: 为Radio相关组件提供共享状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &apos;react&apos;;</span><br><span class="line">import &#123; RadioGroupContextProps &#125; from &apos;./interface&apos;;</span><br><span class="line">const RadioGroupContext = React.createContext&lt;RadioGroupContextProps | null&gt;(null);</span><br><span class="line">export const RadioGroupContextProvider = RadioGroupContext.Provider;</span><br><span class="line">export default RadioGroupContext;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建 src/components/_util/ref.tsx:组件库通用方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &apos;react&apos;;</span><br><span class="line"></span><br><span class="line">export function fillRef&lt;T&gt;(ref: React.Ref&lt;T&gt;, node: T) &#123;</span><br><span class="line">  if (typeof ref === &apos;function&apos;) &#123;</span><br><span class="line">    ref(node);</span><br><span class="line">  &#125; else if (typeof ref === &apos;object&apos; &amp;&amp; ref &amp;&amp; &apos;current&apos; in ref) &#123;</span><br><span class="line">    (ref as any).current = node;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export function composeRef&lt;T&gt;(...refs: React.Ref&lt;T&gt;[]): React.Ref&lt;T&gt; &#123;</span><br><span class="line">  return (node: T) =&gt; &#123;</span><br><span class="line">    refs.forEach(ref =&gt; &#123;</span><br><span class="line">      fillRef(ref, node);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建 src/components/Radio/index.tsx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import Radio from &quot;./radio&quot;;</span><br><span class="line">export default Radio;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建 src/components/Radio/_rtl.scss</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;../../styles/variables/radio&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$radio-prefix-cls: &apos;echo-radio&apos;;</span><br><span class="line">$radio-group-prefix-cls: &apos;#&#123;$radio-prefix-cls&#125;-group&apos;;</span><br><span class="line">$radio-prefix-cls-button-wrapper: &apos;#&#123;$radio-prefix-cls&#125;-button-wrapper&apos;;</span><br><span class="line">.#&#123;$radio-group-prefix-cls&#125;&#123;</span><br><span class="line">  &amp;-rtl &#123;</span><br><span class="line">    direction: rtl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 一般状态</span><br><span class="line">.#&#123;$radio-prefix-cls&#125;-wrapper &#123;</span><br><span class="line">  &amp;-rtl &#123;</span><br><span class="line">    margin-right: 0;</span><br><span class="line">    margin-left: $radio-wrapper-margin-right;</span><br><span class="line">    direction: rtl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.#&#123;$radio-prefix-cls-button-wrapper&#125; &#123;</span><br><span class="line">  &amp;-rtl &#123;</span><br><span class="line">    border-right-width: 0;</span><br><span class="line">    border-left-width: $border-width-base;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:not(:first-child) &#123;</span><br><span class="line">    &amp;::before &#123;</span><br><span class="line">      .#&#123;$radio-prefix-cls-button-wrapper&#125;.#&#123;$radio-prefix-cls-button-wrapper&#125;-rtl &amp; &#123;</span><br><span class="line">        right: -1px;</span><br><span class="line">        left: 0;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:first-child &#123;</span><br><span class="line">    .#&#123;$radio-prefix-cls-button-wrapper&#125;.#&#123;$radio-prefix-cls-button-wrapper&#125;-rtl &amp; &#123;</span><br><span class="line">      border-right: $border-width-base $border-style-base $border-color-base;</span><br><span class="line">      border-radius: 0 $border-radius-base $border-radius-base 0;</span><br><span class="line">    &#125;</span><br><span class="line">    .#&#123;$radio-prefix-cls-button-wrapper&#125;-checked:not([class*=&quot;&apos;#&#123;$radio-prefix-cls&#125;-button-wrapper-disabled&apos;&quot;]) &amp; &#123;</span><br><span class="line">      border-right-color:lighten($primary, 10%);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:last-child &#123;</span><br><span class="line">    .#&#123;$radio-prefix-cls-button-wrapper&#125;.#&#123;$radio-prefix-cls-button-wrapper&#125;-rtl &amp; &#123;</span><br><span class="line">      border-radius: $border-radius-base 0 0 $border-radius-base;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;-disabled &#123;</span><br><span class="line">    &amp;:first-child &#123;</span><br><span class="line">      .#&#123;$radio-prefix-cls-button-wrapper&#125;.#&#123;$radio-prefix-cls-button-wrapper&#125;-rtl &amp; &#123;</span><br><span class="line">        border-right-color: $border-color-base;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建 src/components/Icon/_style.scss</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;../../styles/variables/radio&quot;;</span><br><span class="line">@import &quot;./rtl&quot;;</span><br><span class="line"></span><br><span class="line">$radio-prefix-cls: &apos;echo-radio&apos;;</span><br><span class="line">$radio-group-prefix-cls: &apos;#&#123;$radio-prefix-cls&#125;-group&apos;;</span><br><span class="line">$radio-inner-prefix-cls: &apos;#&#123;radio-prefix-cls&#125;-inner&apos;;</span><br><span class="line">$radio-duration: 0.3s;</span><br><span class="line">$radio-focus-shadow: 0 0 0 3px fade($primary, 8%);</span><br><span class="line">$radio-button-focus-shadow: $radio-focus-shadow;</span><br><span class="line"></span><br><span class="line">.#&#123;$radio-group-prefix-cls&#125; &#123;</span><br><span class="line">  @include reset-component;</span><br><span class="line"></span><br><span class="line">  display: inline-block;</span><br><span class="line">  font-size: 0;</span><br><span class="line">  line-height: unset;</span><br><span class="line"></span><br><span class="line">  .echo-badge-count &#123;</span><br><span class="line">    z-index: 1;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .echo-badge:not(:first-child) .#&#123;$radio-prefix-cls&#125;-button-wrapper &#123;</span><br><span class="line">    border-left: none;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 一般状态</span><br><span class="line">.#&#123;$radio-prefix-cls&#125;-wrapper &#123;</span><br><span class="line">  @include reset-component;</span><br><span class="line"></span><br><span class="line">  position: relative;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  margin-right: $radio-wrapper-margin-right;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.#&#123;$radio-prefix-cls&#125; &#123;</span><br><span class="line">  @include reset-component;</span><br><span class="line"></span><br><span class="line">  position: relative;</span><br><span class="line">  top: -3px;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  line-height: 1;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">  vertical-align: sub;</span><br><span class="line">  outline: none;</span><br><span class="line">  cursor: pointer;</span><br><span class="line"></span><br><span class="line">  .#&#123;$radio-prefix-cls&#125;-wrapper:hover &amp;,</span><br><span class="line">  &amp;:hover .#&#123;$radio-inner-prefix-cls&#125;,</span><br><span class="line">  &amp;-input:focus + .#&#123;$radio-inner-prefix-cls&#125; &#123;</span><br><span class="line">    border-color: $radio-dot-color;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;-input:focus + .#&#123;$radio-inner-prefix-cls&#125; &#123;</span><br><span class="line">    box-shadow: $radio-focus-shadow;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;-checked::after &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    border: 1px solid $radio-dot-color;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    visibility: hidden;</span><br><span class="line">    animation: antRadioEffect 0.36s ease-in-out;</span><br><span class="line">    animation-fill-mode: both;</span><br><span class="line">    content: &apos;&apos;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:hover::after,</span><br><span class="line">  .#&#123;$radio-prefix-cls&#125;-wrapper:hover &amp;::after &#123;</span><br><span class="line">    visibility: visible;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;-inner &#123;</span><br><span class="line">    &amp;::after &#123;</span><br><span class="line">      $radio-dot-size: $radio-size - 8px;</span><br><span class="line"></span><br><span class="line">      position: absolute;</span><br><span class="line">      top: ($radio-size - $radio-dot-size) / 2 - 1px;</span><br><span class="line">      left: ($radio-size - $radio-dot-size) / 2 - 1px;</span><br><span class="line">      display: table;</span><br><span class="line">      width: $radio-dot-size;</span><br><span class="line">      height: $radio-dot-size;</span><br><span class="line">      background-color: $radio-dot-color;</span><br><span class="line">      border-top: 0;</span><br><span class="line">      border-left: 0;</span><br><span class="line">      border-radius: $radio-dot-size;</span><br><span class="line">      transform: scale(0);</span><br><span class="line">      opacity: 0;</span><br><span class="line">      transition: all $radio-duration $ease-in-out-circ;</span><br><span class="line">      content: &apos; &apos;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 选中状态</span><br><span class="line">.#&#123;$radio-prefix-cls&#125;-checked &#123;</span><br><span class="line">  .#&#123;$radio-inner-prefix-cls&#125; &#123;</span><br><span class="line">    border-color: $radio-dot-color;</span><br><span class="line">    &amp;::after &#123;</span><br><span class="line">      transform: scale(1);</span><br><span class="line">      opacity: 1;</span><br><span class="line">      transition: all $radio-duration $ease-in-out-circ;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.#&#123;$radio-prefix-cls&#125;-disabled &#123;</span><br><span class="line">  .#&#123;$radio-inner-prefix-cls&#125; &#123;</span><br><span class="line">    background-color: $disabled-color;</span><br><span class="line">    border-color: $border-color-base !important;</span><br><span class="line">    cursor: not-allowed;</span><br><span class="line">    &amp;::after &#123;</span><br><span class="line">      background-color: $radio-dot-disabled-color;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .#&#123;$radio-prefix-cls&#125;-input &#123;</span><br><span class="line">    cursor: not-allowed;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp; + span &#123;</span><br><span class="line">    color: $disabled-color;</span><br><span class="line">    cursor: not-allowed;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">span.#&#123;$radio-prefix-cls&#125; + * &#123;</span><br><span class="line">  padding-right: 8px;</span><br><span class="line">  padding-left: 4px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.#&#123;$radio-prefix-cls&#125;-button-wrapper &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  height: $height-base;</span><br><span class="line">  margin: 0;</span><br><span class="line">  padding: 0 $padding-md - 1px;</span><br><span class="line">  color: $radio-button-color;</span><br><span class="line">  font-size: $font-size-base;</span><br><span class="line">  line-height: $height-base - 2px;</span><br><span class="line">  background: $radio-button-bg;</span><br><span class="line">  border: $border-width-base $border-style-base $border-color-base;</span><br><span class="line">  // strange align fix for chrome but works</span><br><span class="line">  // https://gw.alipayobjects.com/zos/rmsportal/VFTfKXJuogBAXcvfAUWJ.gif</span><br><span class="line">  border-top-width: $border-width-base + 0.02px;</span><br><span class="line">  border-left-width: 0;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">  transition: color 0.3s, background 0.3s, border-color 0.3s, box-shadow 0.3s;</span><br><span class="line"></span><br><span class="line">  a &#123;</span><br><span class="line">    color: $radio-button-color;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &gt; .#&#123;$radio-prefix-cls&#125;-button &#123;</span><br><span class="line">    display: block;</span><br><span class="line">    width: 0;</span><br><span class="line">    height: 0;</span><br><span class="line">    margin-left: 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .#&#123;$radio-group-prefix-cls&#125;-large &amp; &#123;</span><br><span class="line">    height: $height-lg;</span><br><span class="line">    font-size: $font-size-lg;</span><br><span class="line">    line-height: $height-lg - 2px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .#&#123;$radio-group-prefix-cls&#125;-small &amp; &#123;</span><br><span class="line">    height: $height-sm;</span><br><span class="line">    padding: 0 $control-padding-horizontal-sm - 1px;</span><br><span class="line">    line-height: $height-sm - 2px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:not(:first-child) &#123;</span><br><span class="line">    &amp;::before &#123;</span><br><span class="line">      position: absolute;</span><br><span class="line">      top: $border-width-base * -1;</span><br><span class="line">      left: -1px;</span><br><span class="line">      display: block;</span><br><span class="line">      box-sizing: content-box;</span><br><span class="line">      width: 1px;</span><br><span class="line">      height: 100%;</span><br><span class="line">      padding: $border-width-base 0;</span><br><span class="line">      background-color: $border-color-base;</span><br><span class="line">      transition: background-color 0.3s;</span><br><span class="line">      content: &apos;&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:first-child &#123;</span><br><span class="line">    border-left: $border-width-base $border-style-base $border-color-base;</span><br><span class="line">    border-radius: $border-radius-base 0 0 $border-radius-base;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:last-child &#123;</span><br><span class="line">    border-radius: 0 $border-radius-base $border-radius-base 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:first-child:last-child &#123;</span><br><span class="line">    border-radius: $border-radius-base;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">    color: $radio-dot-color;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:focus-within &#123;</span><br><span class="line">    box-shadow: $radio-button-focus-shadow;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .#&#123;$radio-prefix-cls&#125;-inner,</span><br><span class="line">  input[type=&apos;checkbox&apos;],</span><br><span class="line">  input[type=&apos;radio&apos;] &#123;</span><br><span class="line">    width: 0;</span><br><span class="line">    height: 0;</span><br><span class="line">    opacity: 0;</span><br><span class="line">    pointer-events: none;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;-checked:not(&amp;-disabled) &#123;</span><br><span class="line">    z-index: 1;</span><br><span class="line">    color: $radio-dot-color;</span><br><span class="line">    background: $radio-button-checked-bg;</span><br><span class="line">    border-color: $radio-dot-color;</span><br><span class="line"></span><br><span class="line">    &amp;::before &#123;</span><br><span class="line">      background-color: $radio-dot-color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;:first-child &#123;</span><br><span class="line">      border-color: $radio-dot-color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">      color: $radio-button-hover-color;</span><br><span class="line">      border-color: $radio-button-hover-color;</span><br><span class="line">      &amp;::before &#123;</span><br><span class="line">        background-color: $radio-button-hover-color;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;:active &#123;</span><br><span class="line">      color: $radio-button-active-color;</span><br><span class="line">      border-color: $radio-button-active-color;</span><br><span class="line">      &amp;::before &#123;</span><br><span class="line">        background-color: $radio-button-active-color;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;:focus-within &#123;</span><br><span class="line">      box-shadow: $radio-button-focus-shadow;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .#&#123;$radio-group-prefix-cls&#125;-solid &amp;-checked:not(&amp;-disabled) &#123;</span><br><span class="line">    color: $radio-solid-checked-color;</span><br><span class="line">    background: $radio-dot-color;</span><br><span class="line">    border-color: $radio-dot-color;</span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">      color: $radio-solid-checked-color;</span><br><span class="line">      background: $radio-button-hover-color;</span><br><span class="line">      border-color: $radio-button-hover-color;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;:active &#123;</span><br><span class="line">      color: $radio-solid-checked-color;</span><br><span class="line">      background: $radio-button-active-color;</span><br><span class="line">      border-color: $radio-button-active-color;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;:focus-within &#123;</span><br><span class="line">      box-shadow: $radio-button-focus-shadow;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;-disabled &#123;</span><br><span class="line">    color: $disabled-color;</span><br><span class="line">    background-color: $disabled-bg;;</span><br><span class="line">    border-color: $border-color-base;</span><br><span class="line">    cursor: not-allowed;</span><br><span class="line"></span><br><span class="line">    &amp;:first-child,</span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">      color: $disabled-color;</span><br><span class="line">      background-color: $disabled-bg;;</span><br><span class="line">      border-color: $border-color-base;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;:first-child &#123;</span><br><span class="line">      border-left-color: $border-color-base;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;-disabled &amp;-checked &#123;</span><br><span class="line">    color: $radio-disabled-button-checked-color;</span><br><span class="line">    background-color: $radio-disabled-button-checked-bg;</span><br><span class="line">    border-color: $border-color-base;</span><br><span class="line">    box-shadow: none;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes antRadioEffect &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    transform: scale(1);</span><br><span class="line">    opacity: 0.5;</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    transform: scale(1.6);</span><br><span class="line">    opacity: 0;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Firefox hack</span><br><span class="line">@supports (-moz-appearance: meterbar) and (background-blend-mode: difference, normal) &#123;</span><br><span class="line">  .#&#123;$radio-prefix-cls&#125; &#123;</span><br><span class="line">    vertical-align: text-bottom;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建 styles/variables/_radio.scss文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;./common&quot;;</span><br><span class="line">// $font-size-base</span><br><span class="line">$radio-wrapper-margin-right: 8px;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建 src/styles/index.scss文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// radio样式</span><br><span class="line">@import &quot;../components/Radio/style&quot;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>接下来<a href="https://www.jianshu.com/p/1e262b487f26" target="_blank" rel="noopener">[Typescript] 为第三方库添加声明文件 .d.ts</a></p>
</li>
<li><p>新建src/typings/index.d.ts文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/// &lt;reference path=&quot;custom-typings.d.ts&quot; /&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建src/typings/custom-typings.d.ts文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">declare module &apos;rc-checkbox&apos;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改App.tsx文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 增加</span><br><span class="line">import Radio from &quot;./components/Radio/radio&quot;;</span><br><span class="line">&lt;Radio name=&quot;111&quot;&gt;Radio&lt;/Radio&gt;</span><br><span class="line">&lt;Radio name=&quot;111&quot; disabled=&#123;true&#125;&gt;Radio2&lt;/Radio&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改index.tsx文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export &#123; default as Radio &#125; from &quot;./components/Radio&quot;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="三、-运行项目"><a href="#三、-运行项目" class="headerlink" title="三、 运行项目"></a>三、 运行项目</h2><p> 执行命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm start</span><br></pre></td></tr></table></figure></p>
<p>访问项目 可以看到Radio组件成功了！<br><img src="https://upload-images.jianshu.io/upload_images/11846892-7fc5a5e3af91ee81.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="四、-单元测试"><a href="#四、-单元测试" class="headerlink" title="四、 单元测试"></a>四、 单元测试</h2><p>新建src/Radio/radio.test.tsx文件·<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import &#123; mount, render &#125; from &apos;enzyme&apos;;</span><br><span class="line">import Radio, &#123; Group, Button &#125; from &apos;..&apos;;</span><br><span class="line">import focusTest from &apos;../../../tests/shared/focusTest&apos;;</span><br><span class="line">import mountTest from &apos;../../../tests/shared/mountTest&apos;;</span><br><span class="line">import rtlTest from &apos;../../../tests/shared/rtlTest&apos;;</span><br><span class="line"></span><br><span class="line">describe(&apos;Radio&apos;, () =&gt; &#123;</span><br><span class="line">  focusTest(Radio, &#123; refFocus: true &#125;);</span><br><span class="line">  mountTest(Radio);</span><br><span class="line">  mountTest(Group);</span><br><span class="line">  mountTest(Button);</span><br><span class="line"></span><br><span class="line">  rtlTest(Radio);</span><br><span class="line">  rtlTest(Group);</span><br><span class="line">  rtlTest(Button);</span><br><span class="line"></span><br><span class="line">  it(&apos;should render correctly&apos;, () =&gt; &#123;</span><br><span class="line">    const wrapper = render(&lt;Radio className=&quot;customized&quot;&gt;Test&lt;/Radio&gt;);</span><br><span class="line">    expect(wrapper).toMatchSnapshot();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  it(&apos;responses hover events&apos;, () =&gt; &#123;</span><br><span class="line">    const onMouseEnter = jest.fn();</span><br><span class="line">    const onMouseLeave = jest.fn();</span><br><span class="line"></span><br><span class="line">    const wrapper = mount(&lt;Radio onMouseEnter=&#123;onMouseEnter&#125; onMouseLeave=&#123;onMouseLeave&#125; /&gt;);</span><br><span class="line"></span><br><span class="line">    wrapper.find(&apos;label&apos;).simulate(&apos;mouseenter&apos;);</span><br><span class="line">    expect(onMouseEnter).toHaveBeenCalled();</span><br><span class="line"></span><br><span class="line">    wrapper.find(&apos;label&apos;).simulate(&apos;mouseleave&apos;);</span><br><span class="line">    expect(onMouseLeave).toHaveBeenCalled();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>执行命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm test</span><br></pre></td></tr></table></figure></p>
<p>可以看到单元测试成功通过！<br><img src="https://upload-images.jianshu.io/upload_images/11846892-44fe42fa111d9409.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="五、编写storybook文档"><a href="#五、编写storybook文档" class="headerlink" title="五、编写storybook文档"></a>五、编写storybook文档</h2><ul>
<li><p>新建<code>src/Radio/radio.stories.tsx</code>文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import &#123; storiesOf &#125; from &apos;@storybook/react&apos;;</span><br><span class="line">import &#123; action &#125; from &apos;@storybook/addon-actions&apos;;</span><br><span class="line"></span><br><span class="line">import Radio from &apos;./radio&apos;</span><br><span class="line"></span><br><span class="line">const defaultRadio = () =&gt; (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;Radio onClick=&#123;action(&apos;default Radio&apos;)&#125;&gt;default radio&lt;/Radio&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const radioWithDisabled = () =&gt; (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;Radio onClick=&#123;action(&apos;disabled radio&apos;)&#125;   disabled=&#123;true&#125;&gt;disabled radio&lt;/Radio&gt;</span><br><span class="line">        &lt;Radio onClick=&#123;action(&apos;unDisabled radio&apos;)&#125;  &gt;unDisabled radio&lt;/Radio&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">storiesOf(&apos;Radio 按钮&apos;, module)</span><br><span class="line">    .addParameters(&#123;</span><br><span class="line">        info: &#123;</span><br><span class="line">            text: `</span><br><span class="line">        ## 引用方法</span><br><span class="line">        ~~~js</span><br><span class="line">        import &#123;Radio&#125; from &apos;echo-rui</span><br><span class="line">        ~~~</span><br><span class="line">        `</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .add(&apos;默认 Radio&apos;, defaultRadio)</span><br><span class="line">    .add(&apos;禁用的 Radio&apos;,radioWithDisabled)</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run storybook</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>浏览器打开<a href="http://localhost:9009/,可以看到组件库文档生成了。" target="_blank" rel="noopener">http://localhost:9009/,可以看到组件库文档生成了。</a><br><img src="https://upload-images.jianshu.io/upload_images/11846892-88eb962e94583778.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="六、-发布到npm"><a href="#六、-发布到npm" class="headerlink" title="六、 发布到npm"></a>六、 发布到npm</h2><p> ✅ ✅ ✅ ✅ ✅</p>
<h2 id="大功告成✌️✌️✌️"><a href="#大功告成✌️✌️✌️" class="headerlink" title=" 大功告成✌️✌️✌️"></a> 大功告成✌️✌️✌️</h2><p>总结：大功告成✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️</p>

        </div>

        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/React/"># React</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2020/06/01/React1/">使用react搭建组件库：react+typescript+storybook</a>
            
            
            <a class="next" rel="next" href="/2020/04/01/React2/">使用react搭建组件库--icon组件</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© Echo | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>
</html>
